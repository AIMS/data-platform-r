<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Navigating dataaimsr • dataaimsr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Navigating dataaimsr">
<meta property="og:description" content="dataaimsr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dataaimsr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/navigating.html">Navigating dataaimsr</a>
    </li>
    <li>
      <a href="../articles/weather.html">AIMS weather time series data sets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/open-aims/dataaimsr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="navigating_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Navigating dataaimsr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-aims/dataaimsr/blob/master/vignettes/navigating.Rmd"><code>vignettes/navigating.Rmd</code></a></small>
      <div class="hidden name"><code>navigating.Rmd</code></div>

    </div>

    
    
<div id="discover-a-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#discover-a-dataset" class="anchor"></a>Discover a dataset</h2>
<p>The very first thing to do is read the documentation on our <a href="../index.html">README</a> page. Make sure you have the package properly installed, and that your personal <a href="https://open-aims.github.io/data-platform/key-request">AIMS Data Platform API Key</a> has been downloaded.</p>
<p>Once you have obtained your API Key, you can either place it permanently on your <code>.Renviron</code> file and set the object <code>my_api_key</code> to <code>NULL</code> in the chunk below, or if for some reason you are having difficulty placing your API Key permanently to the <code>.Renviron</code>, then just paste it to the object <code>my_api_key</code> below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set my_api_key to NULL if successfully placed in .Renviron</span>
<span class="co"># paste your key where it says api-key-for-r-notebook</span>
<span class="va">my_api_key</span> <span class="op">&lt;-</span> <span class="st">"api-key-for-r-notebook"</span></code></pre></div>
<p>Then install <code>dataaimsr</code> following the documentation on our <a href="../index.html">README</a> page. Once that’s out of the way, we load the packages needed for this vignette:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap">ggmap</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://open-aims.github.io/dataaimsr">dataaimsr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="how-this-package-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-this-package-works" class="anchor"></a>How this package works</h2>
<p><code>dataaimsr</code> contains two sets of monitoring data collected by AIMS since the 1980’s: the <a href="https://doi.org/10.25845/5c09bf93f315d">Weather Station</a> dataset which contains encompasses data for different parameters (e.g. Air Temperature, Air Pressure, Chlorophyll, and many others); and the <a href="https://doi.org/10.25845/5b4eb0f9bb848">Sea Water Temperature Loggers</a> dataset which contains records of (you guessed it!) sea water temperature at different sites and water depths.</p>
<p>The datasets are very large, and as such they are not locally stored. They are instead downloaded via the API and unique DOI identifier (just hover over the data links above to see the actual DOI codes). The datasets are structured by sites, series and parameters. A series is a continuing time-series, i.e. a collection of deployments measuring the same parameter (e.g. Air Temperature, Air Pressure, Chlorophyll) at the same site.</p>
<p>For the Sea Water Temperature Loggers dataset, series is synonymous with the variable called subsite. For the Weather Station dataset, it is the combination of subsite and parameter.</p>
<p>This vignette gives an overview of how one would go about discovering the overall information contained in the datasets. For dataset-specific vignettes, see our other <a href="https://open-aims.github.io/dataaimsr/articles">vignette pages</a>.</p>
</div>
<div id="discover-a-dataset-1" class="section level2">
<h2 class="hasAnchor">
<a href="#discover-a-dataset-1" class="anchor"></a>Discover a dataset</h2>
<p>The <a href="https://open-aims.github.io/data-platform">AIMS Data Platform API</a> points to the full metadata of each dataset. We are currently working on ways to facilitate the visualisation of both datasets and their multiple features directly through the R package. At the moment though it is only possible to visualise summary information for the Sea Water Temperature Loggers dataset. A similar feature for the Weather Station dataset will be implemented in the near future (likely early 2021)—so for now, please refer to the online metadata to discover from where (and when) you can download data.</p>
<div id="data-summary" class="section level3">
<h3 class="hasAnchor">
<a href="#data-summary" class="anchor"></a>Data summary</h3>
<p>The first step would be to visualise the dataset. Let’s do this by mapping all available sites. First we need to store the DOI for the target dataset—this is done via the function <code>aims_data_doi</code>. We can then download the summary information for the Sea Water Temperature Loggers dataset using the main function called <code>aims_data</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># see ?aims_data_doi for argument names</span>
<span class="va">ssts_doi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aims_data_doi.html">aims_data_doi</a></span><span class="op">(</span><span class="st">"temp_loggers"</span><span class="op">)</span>
<span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aims_data.html">aims_data</a></span><span class="op">(</span><span class="va">ssts_doi</span>,
                   api_key <span class="op">=</span> <span class="va">my_api_key</span>,
                   summary <span class="op">=</span> <span class="st">"summary-by-series"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sdata</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></code></pre></div>
<pre><code>##   site_id                    site subsite_id    subsite series_id     series
## 1       1 Agincourt Reef Number 3       2687     AG3FL1      2687     AG3FL1
## 2       1 Agincourt Reef Number 3      14276  AG3SL1old     14276  AG3SL1old
## 3       3           Cleveland Bay       3007 CLEVAWSSL1      3007 CLEVAWSSL1
## 4       3           Cleveland Bay       3069 CLEVAWSFL1      3069 CLEVAWSFL1
## 5       4             Davies Reef       2629     DAVFL1      2629     DAVFL1
## 6       4             Davies Reef       2630     DAVSL1      2630     DAVSL1
##           parameter parameter_id  from_date  thru_date      lat      lon
## 1 Water Temperature            1 1996-03-30 2008-12-11 -15.9903 145.8212
## 2 Water Temperature            1 1996-03-30 2011-07-21 -15.9905 145.8213
## 3 Water Temperature            1 2004-05-13 2008-05-03 -19.1557 146.8813
## 4 Water Temperature            1 2005-09-15 2005-12-22 -19.1557 146.8813
## 5 Water Temperature            1 1997-08-26 2019-06-10 -18.8065 147.6688
## 6 Water Temperature            1 1996-05-02 2017-05-07 -18.8060 147.6686
##   uncal_obs cal_obs qc_obs
## 1     23130  110480 110480
## 2    114450  216794 216794
## 3     11951   53231  53231
## 4         0    4656   4656
## 5    437544  566585 566585
## 6    369317  495663 495608</code></pre>
<p>The summary argument here is key. It should only be flagged when the user wants an overview of the available data. Again, this currently implemented for the Sea Water Temperature Loggers dataset. One can visualise <code>summary-by-series</code> or <code>summary-by-deployment</code>.</p>
<p>Notice that <code>sdata$data</code> contains a lot of information, most of which is related to site / series / parameter ID. Each row corresponds to a unique series, and a certain site may contain multiple series; in such cases, series generally differ from one another by depth. The columns <code>from_date</code> and <code>thru_date</code> are probably one of the most valuable pieces of information. They provide the user with the window of data collection for a particular series, which is probably crucial to decide whether that particular series is of relevance to the specific question in hand.</p>
<p>Also note that there are three columns containing the total number of observations in a series: <code>uncal_obs</code>, <code>cal_obs</code> and <code>qc_obs</code>, which respectively stand for uncalibrated, calibrated, and quality-controlled observations. Calibrated and quality-controlled are generally the same, and currently there is no public information on AIMS quality-control methods and algorithms. However, if this is crucial information to you, please reach out to the <a href="adc@aims.gov.au">Data Manager from the AIMS Data Centre</a>. So let’s go ahead and plot these data on a map of Australia, while colouring based on the total amount of calibrated observations:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sdata</span><span class="op">$</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">sdata</span><span class="op">$</span><span class="va">data</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">cal_obs</span> <span class="op">*</span> <span class="fl">1e-3</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span><span class="op">)</span>
<span class="va">lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">atop</a></span><span class="op">(</span><span class="st">"# Calibrated obs."</span>,
                       <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"("</span> <span class="op">%*%</span> <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">ozmap</span> <span class="op">&lt;-</span> <span class="fu">ggmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html">get_stamenmap</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fl">94</span>, bottom <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>,
                                       right <span class="op">=</span> <span class="fl">162</span>, top <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
                              zoom <span class="op">=</span> <span class="fl">4</span>, maptype <span class="op">=</span> <span class="st">"watercolor"</span><span class="op">)</span>
<span class="fu">ggmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">ozmap</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sdata</span><span class="op">$</span><span class="va">data</span>,
             mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">lon</span>, y <span class="op">=</span> <span class="va">lat</span>,
                           colour <span class="op">=</span> <span class="va">cols</span>,
                           fill <span class="op">=</span> <span class="va">cols</span><span class="op">)</span>,
             shape <span class="op">=</span> <span class="fl">16</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_colour_gradient</span><span class="op">(</span>name <span class="op">=</span> <span class="va">lab</span>,
                        low <span class="op">=</span> <span class="st">"dodgerblue4"</span>,
                        high <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_fill_gradient</span><span class="op">(</span>name <span class="op">=</span> <span class="va">lab</span>,
                      low <span class="op">=</span> <span class="st">"dodgerblue4"</span>,
                      high <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span></code></pre></div>
<p><img src="navigating_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</div>
<div id="filter-values" class="section level3">
<h3 class="hasAnchor">
<a href="#filter-values" class="anchor"></a>Filter values</h3>
<p>In the case of the Weather Station dataset, knowing what sites are out there is a bit tricky. However, currently we have a convenience function called <code>filter_values</code> which allows one to query what sites, series and parameters are available for both datasets:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weather_doi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aims_data_doi.html">aims_data_doi</a></span><span class="op">(</span><span class="st">"weather"</span><span class="op">)</span>
<span class="fu"><a href="../reference/filter_values.html">filter_values</a></span><span class="op">(</span><span class="va">weather_doi</span>, filter_name <span class="op">=</span> <span class="st">"series"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##   series_id
## 1    104918
## 2    100686
## 3       266
## 4      2639
## 5     10243
## 6       258
##                                                              series_name
## 1        Myrmidon Reef Weather Station Wind Speed (scalar avg b 10 min) 
## 2                            Saibai Island Weather Station Hail Duration
## 3 Orpheus Island Relay Pole 3 Wind Direction (Vector Average 30 Minutes)
## 4 Hardy Reef Weather Station Wind Direction (Vector Standard 10 Minutes)
## 5                           Raine Island Weather Station Air Temperature
## 6             Orpheus Island Relay Pole 3 Wind Speed (Scalar avg 10 min)</code></pre>
<p>The downside is that one cannot know what time window is available for each one of those, nor how they are nested (i.e. series / parameter / site). In a way though the series name generally gives that information anyway (see code output above). If knowing the available observation window is absolutely crucial, then as mentioned above the user should refer to the <a href="https://open-aims.github.io/data-platform">online metadata</a>.</p>
</div>
</div>
<div id="download-slices-of-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#download-slices-of-datasets" class="anchor"></a>Download slices of datasets</h2>
<p>Now that we know how to explore the datasets and what data is out there, we finish this vignette by showing an example of how one would go about downloading actual data.</p>
<p>We say slices of datasets because AIMS monitoring datasets are of very high temporal resolution and if one tries to download the entire thing it might take hours if not days. Generally that is why we download slices of data at a time, and for that we need filters.</p>
<div id="data-filters" class="section level3">
<h3 class="hasAnchor">
<a href="#data-filters" class="anchor"></a>Data filters</h3>
<p>Filters are the last important information the user needs to know to master the navigation and download of AIMS monitoring datasets. Each dataset can filtered by attributes which can be exposed with the function <code>expose_attributes</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/expose_attributes.html">expose_attributes</a></span><span class="op">(</span><span class="va">weather_doi</span><span class="op">)</span></code></pre></div>
<pre><code>## $summary
## [1] NA
## 
## $filters
##  [1] "site-name"     "series"        "size"          "parameter"    
##  [5] "min-latitude"  "max-latitude"  "min-longitude" "max-longitude"
##  [9] "from-date"     "thru-date"     "version"       "cursor"</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/expose_attributes.html">expose_attributes</a></span><span class="op">(</span><span class="va">ssts_doi</span><span class="op">)</span></code></pre></div>
<pre><code>## $summary
## [1] "summary-by-series"     "summary-by-deployment"
## 
## $filters
##  [1] "site"      "subsite"   "series"    "size"      "parameter" "min_lat"  
##  [7] "max_lat"   "min_lon"   "max_lon"   "from_date" "thru_date" "version"  
## [13] "cursor"</code></pre>
<p>Notice that they are not (yet!) consistent across datasets, so pay attention to the nuances. The help file (see <code><a href="../reference/expose_attributes.html">?expose_attributes</a></code>) contains the details about what each filter targets. So, having an understanding of the summaries and what filters are available provide the user with a great head start.</p>
<p>Downloading the data is achieved using the same <code>aims_data</code> function, however now we do not specify a <code>summary</code> argument, and instead implement filters. For example, let’s say we want to download all the data collected at the Yongala for a specific time window:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wdata_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aims_data.html">aims_data</a></span><span class="op">(</span><span class="va">weather_doi</span>,
                     api_key <span class="op">=</span> <span class="va">my_api_key</span>,
                     filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"site-name"</span> <span class="op">=</span> <span class="st">"Yongala"</span>,
                                    <span class="st">"from-date"</span> <span class="op">=</span> <span class="st">"2018-01-01"</span>,
                                    <span class="st">"thru-date"</span> <span class="op">=</span> <span class="st">"2018-01-02"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wdata_a</span><span class="op">)</span></code></pre></div>
<pre><code>##   deployment_id site_name    location_name depth  latitude longitude
## 1        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
## 2        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
## 3        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
## 4        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
## 5        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
## 6        472564   Yongala Yongala NRS Buoy    NA -19.30372  147.6205
##                        parameter serial_num    data_id                time
## 1 Wind Speed (Scalar avg 10 min)   E0810017 1002524661 2018-01-01 00:00:00
## 2 Wind Speed (Scalar avg 10 min)   E0810017 1002525035 2018-01-01 00:10:00
## 3 Wind Speed (Scalar avg 10 min)   E0810017 1002525436 2018-01-01 00:20:00
## 4 Wind Speed (Scalar avg 10 min)   E0810017 1002525892 2018-01-01 00:30:00
## 5 Wind Speed (Scalar avg 10 min)   E0810017 1002526278 2018-01-01 00:40:00
## 6 Wind Speed (Scalar avg 10 min)   E0810017 1002526524 2018-01-01 00:50:00
##   raw_value qc_value series_id                                     series_name
## 1   21.8412  21.8412      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)
## 2   22.4100  22.4100      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)
## 3   22.4496  22.4496      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)
## 4   23.1876  23.1876      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)
## 5   22.1364  22.1364      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)
## 6   22.0104  22.0104      4103 Yongala NRS Buoy Wind Speed (Scalar avg 10 min)</code></pre>
<p>We see that there a bunch of parameters available for this site at the specified time:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">wdata_a</span><span class="op">$</span><span class="va">parameter</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "Wind Speed (Scalar avg 10 min)"             
##  [2] "Wind Direction (Scalar Average 10 Minutes)" 
##  [3] "Wind Direction (Scalar Standard 10 Minutes)"
##  [4] "Wind Speed (scalar avg b 10 min) "          
##  [5] "Wind Speed (vector avg 10 min)"             
##  [6] "Wind Direction (Vector Average 10 Minutes)" 
##  [7] "Wind Direction (Vector Standard 10 Minutes)"
##  [8] "Maximum Wind Speed 10 Minutes"              
##  [9] "Minimum Wind Speed 10 Minutes"              
## [10] "Air Temperature"                            
## [11] "Humidity"                                   
## [12] "Air Pressure"                               
## [13] "Rain Duration"                              
## [14] "Rain Intensity"                             
## [15] "Wind Speed (Scalar avg 30 min)"             
## [16] "Wind Direction (Scalar Average 30 Minutes)" 
## [17] "Wind Direction (Scalar Standard 30 Minutes)"
## [18] "Wind Speed (scalar avg b 30 min)"           
## [19] "Wind Speed (vector avg 30 min)"             
## [20] "Wind Direction (Vector Average 30 Minutes)" 
## [21] "Wind Direction (Vector Standard 30 Minutes)"
## [22] "Maximum Wind Speed 30 Minutes"              
## [23] "Minimum Wind Speed 30 Minutes"              
## [24] "Rain Accumulation"                          
## [25] "Water Temperature"                          
## [26] "Water Pressure"                             
## [27] "Salinity"                                   
## [28] "Chlorophyll"                                
## [29] "Turbidity"                                  
## [30] "Depth"                                      
## [31] "Dissolved Oxygen (mole)"</code></pre>
<p>And the actual measurements are either raw or quality-controlled. Let’s plot wind speed data as an example</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wdata_a</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Wind Speed"</span>, <span class="va">parameter</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">qc_value</span>, colour <span class="op">=</span> <span class="va">parameter</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>,
         y <span class="op">=</span> <span class="st">"Wind speed (km / h)"</span>,
         colour <span class="op">=</span> <span class="st">"Site"</span>,
         title <span class="op">=</span> <span class="st">"AIMS Weather stations"</span>,
         subtitle <span class="op">=</span> <span class="st">"Yongala (2018)"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="navigating_files/figure-html/unnamed-chunk-10-1.png" width="710.4"></p>
<p>We could refine even further by including a time window to download the data:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wdata_b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aims_data.html">aims_data</a></span><span class="op">(</span><span class="va">weather_doi</span>,
                     api_key <span class="op">=</span> <span class="va">my_api_key</span>,
                     filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"series"</span> <span class="op">=</span> <span class="fl">64</span>,
                                    <span class="st">"from-date"</span> <span class="op">=</span> <span class="st">"1991-10-18T06:00:00"</span>,
                                    <span class="st">"thru-date"</span> <span class="op">=</span> <span class="st">"1991-10-18T12:00:00"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">data</span>
<span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">wdata_b</span><span class="op">$</span><span class="va">time</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "1991-10-18 06:00:00 UTC" "1991-10-18 12:00:00 UTC"</code></pre>
</div>
</div>
<div id="more-info" class="section level2">
<h2 class="hasAnchor">
<a href="#more-info" class="anchor"></a>More info</h2>
<p>See our other <a href="https://open-aims.github.io/dataaimsr/articles">vignette pages</a> for further dataset-specific explorations.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by AIMS Datacentre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
