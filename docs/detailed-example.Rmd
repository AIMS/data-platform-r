---
title: "AIMS DataPlatform R Client Notebook Example"
output: html_notebook
---
[Back](index)

This example assumes you have obtained an *AIMS DataPlatform API Key*.  See [here](index#usage-of-aims-dataplatform-api-key) to see what that means.

Similar to our previous example we want to run a plot on a series, lets discover a series to plot.  If you are running this notebook in [R Studio](https://www.rstudio.com/) you can click on the green arrow inside each code block to run it.

```{r}
library(aimsdataplatform)
getFilterValues('10.25845/5c09bf93f315d', 'series')
```

The benefits to choosing a data series is that it comes from one location and parameter type, making the data easy to plot.  If we did not choose a data series from the *AIMS Weather* data set we might have to specify additional parameters to ensure the data is as expected.  __Please note that in all code smaples below you should enter your own API Key in the field that says `my-api-key`.__

After deciding on a series we plug the series id into a `getAllData` function:

```{r}
results <- getAllData('10.25845/5c09bf93f315d', apiKey='my-api-key', filters=list('series'=4067, 'from-date'='2018-01-01', 'thru-date'='2018-01-07'))
```

Now the results have been stored in the `results` we can attempt to plot.

```{r}
plot(results$dataFrame$time, results$dataFrame$qc_value)
```

Ok we have a plot, fairly unpleasant looking, that should be a line chart.

```{r}
plot(results$dataFrame$time, results$dataFrame$qc_value, type='l')
```

Lets add some proper labels:

```{r}
plot(results$dataFrame$time, results$dataFrame$qc_value, type='l', xlab="January 2018", ylab="Air Temperature")
```

Finally lets make the colour green and add a main title.

```{r}
plot(results$dataFrame$time, results$dataFrame$qc_value, type='l', xlab="January 2018", ylab="Air Temperature", main="Yongala NRS Buoy Air Temperature", col='green')
```

And add another series:

```{r}
results2 <- getAllData('10.25845/5c09bf93f315d', apiKey='my-api-key', filters=list('series'=87929, 'from-date'='2018-01-01', 'thru-date'='2018-01-07'))
plot(results$dataFrame$time, results$dataFrame$qc_value, type='l', xlab="January 2018", ylab="Air Temperature", main="Air Temperature at AIMS Weather Stations", col='green')
lines(results2$dataFrame$time, results2$dataFrame$qc_value, col="blue")
```

Now a legend to distinguish data sets

```{r}
plot(results$dataFrame$time, results$dataFrame$qc_value, type='l', xlab="January 2018", ylab="Air Temperature", main="Air Temperature at AIMS Weather Stations", col='green')
lines(results2$dataFrame$time, results2$dataFrame$qc_value, col="blue")
legend("bottomright", c("Yongala NRS Buoy", "Bramble Cay"), fill=c("green", "blue"))
```

Finally citations can be added to our document with the following code:

```{r}
results$citation
results2$citation
```

Bibliography
------------

1. `r results$citation`

2. `r results2$citation`

